@{
    ViewData["Title"] = "ForgetPassword";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTP Verification</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body class="bg-light">
   
    <div class="container mt-5">

        <div class="row justify-content-center">
            <div class="col-md-6">
                <!-- Card cho form 1 -->
                <div class="card shadow-sm">
                    <div class="card-header text-center bg-primary text-white">
                        <h5>Enter Your Email</h5>
                    </div>
                    <div class="card-body">
                        <form id="form-1" asp-action="SendOtpForgetPassword" method="post" onsubmit="saveInputValues()">
                            <div class="mb-3">
                                <label for="email" class="form-label">Email Address</label>
                                <input type="text" id="email" name="gmail" class="form-control" placeholder="Enter your email" required />
                            </div>
                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary">Send OTP</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Card cho form 2 -->
                <div id="form-2" class="card shadow-sm mt-4">
                    <div class="card-header text-center bg-success text-white">
                        <h5>Enter OTP</h5>
                    </div>
                    <div class="card-body">
                        <form asp-action="SendPasswordToGmail" method="post">
                            <div class="mb-3">
                                <label for="otp" class="form-label">OTP Code</label>
                                <input type="hidden" id="email2" name="gmail" class="form-control" required />
                                <input type="text" id="otp" name="otp" class="form-control" placeholder="Enter OTP" required />
                            </div>
                            <div class="d-grid">
                                <button type="submit" class="btn btn-success">Verify</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
                document.addEventListener("DOMContentLoaded", function () {
                    const emailInputForm1 = document.getElementById('email');
        const emailInputForm2 = document.getElementById('email2');

                    // Đồng bộ giá trị ban đầu nếu đã có giá trị có sẵn
                    emailInputForm1.addEventListener("input", function () {

                        emailInputForm2.value = emailInputForm1.value;

                    });

                });
    </script>

    <script>
        // Lưu giá trị các ô input trước khi submit
        function saveInputValues() {
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {
                sessionStorage.setItem(input.name, input.value); // Lưu giá trị theo tên
            });
        }

        // Phục hồi giá trị các ô input sau khi load lại trang
        function restoreInputValues() {
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {
                const savedValue = sessionStorage.getItem(input.name);
                if (savedValue) {
                    input.value = savedValue; // Gán lại giá trị đã lưu
                }
            });
        }

        // Gọi khôi phục giá trị khi trang load
        window.onload = restoreInputValues;
    </script>


    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const message = urlParams.get('message');
        if (message) {
            alert(message);
        }
    </script>
</body>
</html>